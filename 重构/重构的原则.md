#重构的原则

## 一、 何谓重构

+ ###名词　 　

对软件内部结构的一种调整，目的是在不改变软件可观察行为的前提下，提高其可理解性，降低其修改成本.

+ ###动词

使用一系列重构手法，在不改变软件可观察行为的前提下，调整其结构.


####关键  
 
运用大量微小且保持软件行为的步骤，一步步达成大规模的修改.
即便重构没有完成，我也可以在任何时候停下来.

####可观察行为   
性能和接口可能会发生变化，用户可感知的行为不会变化.



## 二、两顶帽子

1. 添加功能

2. 重构


## 三、为何重构

+ ###改进软件的设计

1. 经常性的重构有助于代码维护自己该有的形态.
2. 改进设计的一个重要方向就是消除重复代码.
3. 优秀设计的根本:确定所有事物和行为在代码中只表述一次.

+ ###重构使软件更容易理解
1. 准确地说出我想要的. 易于维护和阅读

+ #### 帮助找到代码bug. 

**深入理解代码的所作所为,并立即把新的理解反映在代码当中.**

+ #### 提高编程速度. 
**设计耐久性假说.**


## 四、何时重构
没有专门留给重构的时间,在做其他的事情时自然发生.

+ ####预备性重构:让添加新功能更容易
重构的最佳时机就在添加新功能之前   
上路之前先看地图,找出最佳路径

+ ####帮助理解的重构:使代码更易懂    

扫去窗上的尘埃,使得我们可以看到窗外的风景　　 　

重构引领我获取更高层的理解

+ ####捡垃圾式重构
现有代码做的不够好　　　

+ ####有计划的重构和见机行事的重构

+ ####长期重构

+ ####复审代码时重构

+ ####怎么对经理说

+ ####何时不应该重构     

不需要时

重写比重构容易

## 五、重构的挑战

+ ####延缓新功能的开发
重构应该是纯粹经济角度出发的考量.

+ ####代码所有权

+ ####分支
困难在于处理语义的变化.

+ ####测试
依赖持续集成及时捕获分支集成时的语义冲突.

自测试代码是极限编程的另一个重要组成部分.


+ ####遗留代码
遗留代码多半没有测试.

+ ####数据库
并行修改

## 六、重构、架构和YAGNI
1. 重构可以改善既有代码的设计.
2. 只有未来重构会很困难时，再来添加灵活性机制.
3. YANGI视为将架构、设计和开发过程融合的一种工作方式.

## 七、重构与软件开发过程
要真正以敏捷的方式运作项目,团队成员必须在重构上有能力、有热情、他们采用的开发过程必须与常规的、持续的重构相匹配.

**三大实践:自测试代码、持续集成、重构.**
1. 重构是YAGNI的基础
2. YAGNI又让重构更易开展


## 八、重构与性能
编写可调优的软件,然后调优它以求获得足够的速度.

#### 3种编写快速软件的方法:
+ 时间预算法

+ 持续关注法   
性能应该从全局出发,一旦分散到各个狭隘的角落,每次改善只不过是从对程序行为的一个狭隘视角出发而已,而且常常伴随
着对编译器、运行时环境和硬件行为的误解.

+ 



